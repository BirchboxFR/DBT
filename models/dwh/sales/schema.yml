version: 2

models:
  - name: box_sales
    description: "Table des ventes de box"
    columns:
      - name: sub_id
        description: "Identifiant unique de l'abonnement"
      - name: dw_country_code
        description: "Code pays (FR, DE, etc.)"
      - name: date
        description: "date de la box"
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - sub_id
            - dw_country_code
          severity: warn
          config:
            store_failures: true
            name: "Doublons box_sales"

  - name: shop_sales
    description: "Table des ventes shop"
    columns:
      - name: dw_country_code
        description: "Code pays pour les ventes shop"